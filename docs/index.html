<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
      Home - Documentation
  </title>

  <link href="https://www.braintreepayments.com/images/favicon-ccda0b14.png" rel="icon" type="image/png">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

  <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
  <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
  
  <link type="text/css" rel="stylesheet" href="styles/collapse.css">
  

  

  <!-- start Mixpanel -->
  <script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("1919205b2da72e4da3b9b6639b444d59");</script>
  <!-- end Mixpanel -->
</head>

<body>
  <svg style="display: none;">
    <defs>
      <symbol id="linkIcon" fill="#706d77" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
      </symbol>
    </defs>
  </svg>

  <input type="checkbox" id="nav-trigger" class="nav-trigger" />
  <label for="nav-trigger" class="navicon-button x">
    <div class="navicon"></div>
  </label>

  <label for="nav-trigger" class="overlay"></label>

  <div class="top-nav-wrapper">
    <ul>
      <li  class="active" >
        <a href="index.html">
          
          
            <svg fill="#0095dd" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
              <path d="M0 0h24v24H0z" fill="none"/>
            </svg>
          
        </a>
      </li>

      

    </ul>
  </div>

  <nav>
    <h3 class="reference-title">
      ADR Express Typescript
    </h3>

    
      <h3>
        Resources
      </h3>
      
        <a href="https://github.com/RaresAil/adr-express-ts">GitHub</a>
      
        <a href="https://github.com/RaresAil/adr-express-ts">NPM</a>
      
    

    <h3>Classes</h3><ul><li id="Injector-nav"><a href="module-Injector.Injector.html">Injector</a><ul class='methods'><li data-type="method" id="Injector-get-nav"><a href="module-Injector.Injector.html#.get">get</a></li><li data-type="method" id="Injector-inject-nav"><a href="module-Injector.Injector.html#.inject">inject</a></li><li data-type="method" id="Injector-ready-nav"><a href="module-Injector.Injector.html#.ready">ready</a></li><li data-type="method" id="Injector-setup-nav"><a href="module-Injector.Injector.html#.setup">setup</a></li></ul></li><li id="InjectedClass-nav"><a href="module-Injector-InjectedClass.html">InjectedClass</a><ul class='methods'><li data-type="method" id="InjectedClass-onReady-nav"><a href="module-Injector-InjectedClass.html#.onReady">onReady</a></li></ul></li><li id="InjectedEntity-nav"><a href="module-Injector-InjectedEntity.html">InjectedEntity</a><ul class='methods'><li data-type="method" id="InjectedEntity-onLoad-nav"><a href="module-Injector-InjectedEntity.html#.onLoad">onLoad</a></li></ul></li><li id="Middleware-nav"><a href="module-Injector-Middleware.html">Middleware</a><ul class='methods'><li data-type="method" id="Middleware-middleware-nav"><a href="module-Injector-Middleware.html#.middleware">middleware</a></li></ul></li></ul><h3>Modules</h3><ul><li id="Configuration-nav"><a href="module-Configuration.html">Configuration</a></li><li id="Injector-nav"><a href="module-Injector.html">Injector</a><ul class='methods'><li data-type="method" id="Injector-Inject-nav"><a href="module-Injector.html#.Inject">Inject</a></li><li data-type="method" id="Injector-Retrive-nav"><a href="module-Injector.html#.Retrive">Retrive</a></li></ul></li><li id="Router-nav"><a href="module-Router.html">Router</a><ul class='methods'><li data-type="method" id="Router-Action-nav"><a href="module-Router.html#.Action">Action</a></li><li data-type="method" id="Router-Delete-nav"><a href="module-Router.html#.Delete">Delete</a></li><li data-type="method" id="Router-Domain-nav"><a href="module-Router.html#.Domain">Domain</a></li><li data-type="method" id="Router-Entity-nav"><a href="module-Router.html#.Entity">Entity</a></li><li data-type="method" id="Router-Get-nav"><a href="module-Router.html#.Get">Get</a></li><li data-type="method" id="Router-Patch-nav"><a href="module-Router.html#.Patch">Patch</a></li><li data-type="method" id="Router-Post-nav"><a href="module-Router.html#.Post">Post</a></li><li data-type="method" id="Router-Put-nav"><a href="module-Router.html#.Put">Put</a></li><li data-type="method" id="Router-Responder-nav"><a href="module-Router.html#.Responder">Responder</a></li></ul></li></ul>
  </nav>

  <div id="main">
    

    
      



    

      


  <section class="readme">
    <article>
      <h1>ADR Express TypeScript</h1>
<p><img src="https://github.com/RaresAil/adr-express-ts/workflows/Build%20&amp;%20Testing/badge.svg" alt="Build &amp; Testing">
<img src="https://github.com/RaresAil/adr-express-ts/workflows/CodeQL/badge.svg" alt="CodeQL">
<img src="https://github.com/RaresAil/adr-express-ts/workflows/OSSAR/badge.svg" alt="OSSAR"></p>
<p><img src="https://github.com/RaresAil/adr-express-ts-template/workflows/Template%20-%20Build%20&amp;%20Testing/badge.svg" alt="Template - Build &amp; Testing">
<img src="https://github.com/RaresAil/adr-express-ts-template/workflows/Template%20-%20CodeQL/badge.svg" alt="Template - CodeQL">
<img src="https://github.com/RaresAil/adr-express-ts-template/workflows/Template%20-%20OSSAR/badge.svg" alt="Template - OSSAR"></p>
<p><img src="https://github.com/RaresAil/eadit-cli/workflows/CLI%20-%20Build/badge.svg" alt="CLI - Build">
<img src="https://github.com/RaresAil/eadit-cli/workflows/CLI%20-%20CodeQL/badge.svg" alt="CLI - CodeQL">
<img src="https://github.com/RaresAil/eadit-cli/workflows/CLI%20-%20OSSAR/badge.svg" alt="CLI - OSSAR"></p>
<ul>
<li><a href="https://raresail.github.io/adr-express-ts/">Documentation</a></li>
<li><a href="https://github.com/RaresAil/adr-express-ts">GitHub</a></li>
<li><a href="https://www.npmjs.com/package/adr-express-ts">NPM</a></li>
</ul>
<p>This package is a dependency injection for express with typescript using decorators and the <a href="https://en.wikipedia.org/wiki/Action%E2%80%93domain%E2%80%93responder">Action–Domain–Responder</a> pattern.</p>
<h2>Getting Started</h2>
<h4>Create</h4>
<p>Use my CLI to create the application. Instead of &quot;myFolderName&quot; you can add &quot;.&quot; to install it in the current directory.
Always use <code>npx</code> to use the latest version of the CLI.</p>
<pre class="prettyprint source lang-zsh"><code>npx eadit-cli create myFolderName
</code></pre>
<h4>Template Check</h4>
<p>You will be asked to choose a template. For this one you have to select <code>Express</code></p>
<pre class="prettyprint source lang-zsh"><code>? What template do you want? (Use arrow keys)
❯ Express
  Discord.js
</code></pre>
<h4>Path Check</h4>
<p>You will get the following question:</p>
<pre class="prettyprint source lang-zsh"><code>? Is the path correct? ('/my/path/to/application') (Y/n)
</code></pre>
<p>If the path is correct respond with <code>Y</code> or press <code>Enter</code></p>
<h4>Yarn Check</h4>
<p>If you have Yarn installed, the CLI will ask if you want to use it, if you say <code>N</code> npm will be used.</p>
<pre class="prettyprint source lang-zsh"><code>? Yarn was detected on your system, do you want to use Yarn? (Y/n)
</code></pre>
<h4>Dependency Selector</h4>
<p>For the next part you can choose if you need more dependencies (They will be automaticly injected).
<img src="scripts/resources/cli-q-2.png" alt="Question 2"></p>
<h4>Dialect Selector (Only for Sequelize) and complete extra information</h4>
<p>If you choose <code>Sequelize</code>, you will also be asked to choose which dialect you want and to complete the connection information.
<img src="scripts/resources/cli-q-3.png" alt="Question 3"></p>
<h4>Check if directory is empty</h4>
<p>If the directory you want to create the application is not empty, you will be asked if you want to remove all files from it. If you don't remove the files the project will not be created.</p>
<pre class="prettyprint source lang-zsh"><code>? The current directory is not empty, do you want to clear it? (y/N)
</code></pre>
<h4>Finish</h4>
<p>After everything is installed, you should see the following output.
<img src="scripts/resources/cli-q-final.png" alt="Final"></p>
<h2>About Action–Domain–Responder</h2>
<ul>
<li>The action takes HTTP requests (URLs and their methods) and uses that input to interact with the domain, after which it passes the domain's output to one and only one responder.</li>
<li>The domain can modify state, interacting with storage and/or manipulating data as needed. It contains the business logic.</li>
<li>The responder builds the entire HTTP response from the domain's output which is given to it by the action.</li>
<li>The entity is the model for the database</li>
</ul>
<h2>Project structure</h2>
<pre class="prettyprint source lang-markdown"><code>/src

# Here you define the tests, there are default tests defined.

- /**tests**

- /actions

# Here you define the route and the methods (get, post, put, delete)

# If you have /actions/v1/Action.ts, all the actions in v1 will have the prefix v1

# Are automatically injectetd!

- - action.ts

- /app

# Here you start the server (app.listen) and other checks before/after starting.

- - Server.ts

- /domain
- - /entities

# Here you define the entiry (They are accessed with @Retrive('Entity.NAME') or from your ORM)

# Are automatically injectetd!

- - - entity.ts

# Here you define the domain (They are accessed with @Retrive('Domain.NAME'))

# Are automatically injectetd!

- - domain.ts

- /middlewares

# Here you define middlewares (as classes).

# You inject them manually

- - middleware.ts

/public

# In public (depends on the Configuration made in index.ts) you have the front-end,

# all routes point to index.html (i made it so it can work with React)

- - index.html

- /responders

# Here you define the domains (They are accessed with @Retrive('Responder.NAME'))

# Are automatically injectetd!

- - responder.ts

# Here you inject classes, middlewares, variables, functions, server, router, etc.

# And you have to call Injector.ready(); when you finished all your injections.

- index.ts
</code></pre>
<h2>Configuration</h2>
<pre class="prettyprint source lang-js"><code>Injector.setup({
  rootFile: __filename,
  apiPrefix: '/api',
  debug: {
    log: console.log,
    error: console.error
  },
  staticFiles: {
    path: '/',
    directory: ['public'],
    rateLimitOptions: {
      windowMs: 5 * 60 * 1000,
      max: 100
    }
  },
  errorHandler: undefined /* If undefined, the default error handler will be used. */,
  notFoundHandler: undefined /* If undefined, the default not found handler will be used. */
});
</code></pre>
<h2>Entity Model</h2>
<p>This model is for Mongoose.</p>
<pre class="prettyprint source lang-js"><code>@Inject
@Entity('User')
export default class UserEntity implements InjectedEntity {
  @Retrive('Mongoose')
  private mongoose?: MongooseClass;

  async onLoad(): Promise&lt;void> {
    if (!this.mongoose) {
      return;
    }

    const { ObjectId } = Schema as any;

    this.mongoose.model(
      'User',
      new Schema({
        id: ObjectId,
        email: {
          type: String,
          min: 3,
          max: 255,
          required: true
        },
        password: {
          type: String,
          min: 8,
          required: true
        }
      })
    );
  }
}
</code></pre>
<h2>Responder Model</h2>
<pre class="prettyprint source lang-js"><code>import { Inject, Responder } from 'adr-express-ts';
import { Response } from 'express';

@Inject
@Responder('Demo')
export default class DemoResponder {
  public success(res: Response) {
    return res.status(200).json({
      success: true
    });
  }

  public demo(res: Response, status: number, output: any) {
    return res.status(status).json(output);
  }
}
</code></pre>
<h2>Middleware Model</h2>
<pre class="prettyprint source lang-js"><code>import { Request, Response, NextFunction } from 'express';
import { Middleware } from 'adr-express-ts/lib/@types';
import { Inject } from 'adr-express-ts';

@Inject
export default class AuthentificationMiddleware implements Middleware {
  public async middleware(
    req: Request,
    res: Response,
    next: NextFunction
  ): Promise&lt;any> {
    (req as any).myData = 'My custom request data!';
    return next();
  }
}
</code></pre>
<h2>Action Model</h2>
<pre class="prettyprint source lang-js"><code>import {
  Action,
  Get,
  Post,
  Put,
  Delete,
  Request,
  Response,
  Retrive
} from 'adr-express-ts';
import {
  Request as ExpressRequest,
  Response as ExpressResponse
} from 'express';

import DemoResponder from '../responders/DemoResponder';
import DemoDomain from '../domain/DemoDomain';

@Action('/demo', ['MiddlewareHere'])
export default class DemoAction {
  @Retrive('Responder.Demo')
  private responder?: DemoResponder;

  @Retrive('Domain.Demo')
  private domain?: DemoDomain;

  @Get('/demo1', ['MiddlwareHere'])
  public findAll(
    @Request req: ExpressRequest,
    @Response res: ExpressResponse
  ): any {
    return res.send({
      success: true,
      test: (req as any).myData
    });
  }

  @Post()
  public async saveX(
    @Request req: ExpressRequest,
    @Response res: ExpressResponse
  ): Promise&lt;any> {
    const dataFromDatabase = await this.domain!.test('parameter from action');
    return this.responder!.demo(res, 201, dataFromDatabase);
  }

  @Delete()
  public async deleteY(
    @Request req: ExpressRequest,
    @Response res: ExpressResponse
  ): Promise&lt;any> {
    return this.responder!.success(res);
  }
}
</code></pre>
<h2>Domain Model</h2>
<pre class="prettyprint source lang-js"><code>import { Inject, Domain } from 'adr-express-ts';

@Inject
@Domain('Demo')
export default class DemoDomain {
  public async test(someParameter: string) {
    return {
      success: true,
      data: 'Data from database',
      someParameter
    };
  }
}
</code></pre>
<h2>Server.ts Example</h2>
<pre class="prettyprint source lang-js"><code>import { Configuration, Inject, Retrive } from 'adr-express-ts';
import { InjectedClass } from 'adr-express-ts/lib/@types';
import { Application } from 'express';

@Inject
export default class Server implements InjectedClass {
  @Retrive('ExpressApp')
  private application?: Application;

  @Retrive('Configuration')
  private config?: Configuration;

  @Retrive('Middlewares')
  private middlewares?: any;

  public async onReady(): Promise&lt;void> {
    try {
      if (!this.application || !this.config) {
        return;
      }

      const log = this.config.debug.log ?? console.log;

      this.application.listen(4000, '0.0.0.0', async () => {
        log('Server started %o', '0.0.0.0:4000');
      });
    } catch (e) {
      const error = this.config?.debug.error ?? console.error;
      error(e);
    }
  }
}
</code></pre>
    </article>
  </section>


    


  </div>

  <br class="clear">

  <footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a>
  </footer>

  <script src="scripts/linenumber.js"></script>
  <script src="scripts/pagelocation.js"></script>

  

</body>
</html>